<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Поиск по осциллограммам!</title>

        <!--<script type="text/javascript" src="jquery-1.4.4.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#searchText").keyup(function () {//при опускании клавиши
                    $searchText = $('#searchText').val();//занести в переменную значение ввода
                    $.post("SearchServlet", {searchText: $searchText}, function (data) {// асинхронный запрос на сервер, callback функция дальше
                        //alert(data);
                        $("#searchReport").html(data);//изменить все содержимое id=weatherReport на data
                    });
                });
            });
        </script>-->
    </head>

    <body>
        <table>
            <tr>
                <td><input type="text" name="searchText" id="searchText" onkeyup="searchText()"></td>
            </tr>
        </table>
        <input type="text" name="searchText" id="searchText" onkeyup="searchText()">
        <form>
            <b>Что ищем?</b>
            <table>
                <tr>
                    <td><input type="text" name="searchText" id="searchText" onkeyup="searchText()"></td>
                    <td><input id="getSearchReport" name="getSearchReport" type="button" value="Поиск" onclick="searchText()" /></td>
                </tr>
                <tr>
                    <td><div id="searchReport"></div></td>
                </tr>
            </table>
        </form>
        <a href="newhtml.html">New</a>
        <script type="text/javascript">
            var req;
            function searchText() {
                alert("Запускаем запрос Ajax!");
                var search = document.getElementById("searchText").value;//берем значение текста
                req = new xmlHttpRequest();
                var url = "SearchServlet";//адрес запроса
                req.open("post", "SearchServlet", true);
                req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                req.onreadystatechange = callback;//функция обратного вызова
                //var params = 'searchText=' + encodeURIComponent(search);
                req.send(params);
            }

            function callback() {
                if (req.readyState === 4) {//если ответ полностью получен
                    alert("Ответ получен");
                    var result = document.getElementById('searchReport');//в переменной объект DOM
                    result.innerHTML = '';// очистка элемента
                    var respText = req.responseText;
                    alert(respText);
                    result.innerHTML = respText;
                }
            }

            function focusIn() {
                document.getElementById("searchTextJS").focus();
            }
        </script>
    </body>
</html>
