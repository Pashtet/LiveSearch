<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Поиск по осциллограммам!</title>

        <!--<script type="text/javascript" src="jquery-1.4.4.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#searchText").keyup(function () {//при опускании клавиши
                    $searchText = $('#searchText').val();//занести в переменную значение ввода
                    $.post("SearchServlet", {searchText: $searchText}, function (data) {// асинхронный запрос на сервер, callback функция дальше
                        //alert(data);
                        $("#searchReport").html(data);//изменить все содержимое id=weatherReport на data
                    });
                });
            });
        </script>-->
        <script type="text/javascript">
            var req;
            function searchText() {
                var search = document.getElementById("searchText").value;//берем значение текста
                req = new XMLHttpRequest();
                var url = "SearchServlet";//адрес запроса
                req.open('POST', 'SearchServlet', true);
                req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                req.onreadystatechange = callback;//функция обратного вызова
                var params = 'searchText' + encodeURIComponent(search);
                // var formData = new FormData(document.forms.);
                req.send({searchText: search});
            }

            function callback() {
                if (req.readyState === 4) {//если ответ полностью получен
                    //alert("Ответ получен");
                    var result = document.getElementById('searchReport');//в переменной объект DOM
                    result.innerHTML = '';// очистка элемента
                    var respText = req.responseText;
                    //alert(respText);
                    result.innerHTML = respText;
                }
            }
        </script>
    </head>

    <body>
        <b>Что ищем?</b>
        
        <form action="">
            <table>
                <tr>
                    <td><input type="text" id="searchText" onkeyup=searchText()></td>
                </tr>
                <tr>
                    <td><div id="searchReport"></div></td>
                </tr>
            </table>
            <input id="searchText" name="getSearchReport" type="submit" value="Поиск" />
        </form>

    </body>
</html>
